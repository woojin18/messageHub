<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="common">

    <insert id="insertImageFile" >
    /* common.insertImageFile - 고객사별 이미지 관리 등록 */
        INSERT CM_IMAGE_FILE
        (
            CORP_ID
            , USE_CH_INFO
            , ORIGIN_FILE_NAME
            , IMAGE_FILE_NAME
            , IMAGE_FILE_PATH
            , REG_DT
            , UPD_DT
            , REG_ID
            , UPD_ID
        )
        VALUES
        (
            #{corp_id}
            , #{use_ch_info}
            , #{origin_file_name}
            , #{image_file_name}
            , #{image_file_path}
            , NOW()
            , NOW()
            , #{reg_id}
            , #{upd_id}
        )
    </insert>

    <select id="selectImageList" resultType="hashmap">
    /* common.selectImageList - 고객사별 이미지 조회 */
        SELECT
            IMAGE_FILE_SEQ
            , CORP_ID
            , USE_CH_INFO
            , ORIGIN_FILE_NAME
            , IMAGE_FILE_NAME
            , IMAGE_FILE_PATH
            , REG_DT
            , UPD_DT
            , REG_ID
            , UPD_ID
        FROM CM_IMAGE_FILE
        WHERE CORP_ID = #{corp_id}
            AND JSON_EXTRACT(USE_CH_INFO, CONCAT('$.', #{use_ch_info})) = 'Y'
        ORDER BY REG_DT DESC
    </select>

</mapper>