<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="template">

    <select id="selectPushTemplate" parameterType="string" resultType="hashmap">
    /* template.selectPushTemplate 푸시 템플릿 리스트 조회 */
        SELECT
            TMPLT_ID
            , TMPLT_NAME
            , MSG_TYPE
            , MSG_KIND
            , OTHER_PROJECT_USE_YN
            , TMPLT_TITLE
            , TMPLT_CONTENT
            , RCVBLC_NUMBER
            , ADTN_INFO
            , IMG_URL
            , REG_DT
            , REG_ID
            , UPD_DT
            , UPD_ID
        FROM CM_PUSH_TMPLT
        WHERE 1=1
        <if test="TMPLT_ID != '' and TMPLT_ID != null ">
            AND TMPLT_ID = #{TMPLT_ID}
        </if>
	</select>


    <insert id="insertPushTemplate" parameterType="hashmap">
    /* template.insertPushTemplate - 푸시 템플릿 등록 */
        INSERT
            INTO CM_PUSH_TMPLT
        (
            TMPLT_ID
            , TMPLT_NAME
            , MSG_TYPE
            , MSG_KIND
            , OTHER_PROJECT_USE_YN
            , TMPLT_TITLE
            , TMPLT_CONTENT
            , RCVBLC_NUMBER
            , ADTN_INFO
            , IMG_URL
            , REG_DT
            , REG_ID
            , UPD_DT
            , UPD_ID
        ) VALUES (
            #{TMPLT_ID}
            , #{TMPLT_NAME}
            , #{MSG_TYPE}
            , #{MSG_KIND}
            , #{OTHER_PROJECT_USE_YN}
            , #{TMPLT_TITLE}
            , #{TMPLT_CONTENT}
            , #{RCVBLC_NUMBER}
            , #{ADTN_INFO}
            , #{IMG_URL}
            , NOW()
            , #{REG_ID}
            , NOW()
            , #{UPD_ID}
        )
	</insert>

	<update id="updatePushTemplate" parameterType="hashmap">
		/* template.updatePushTemplate 푸시 템플릿 수정 */
		UPDATE CM_PUSH_TMPLT
		SET
			TMPLT_NAME = #{tmpltName},
			MSG_TYPE = #{msgType},
			MSG_KIND = #{msgKind}
		WHERE TMPLT_ID = #{tmpltId}
	</update>

	<select id="selectRcsTemplate" parameterType="string" resultType="hashmap">
		/* template.selectRcsTemplate RCS 템플릿 리스트 조회 */
		SELECT
			TMPLT_ID,
			MESSAGEBASEFORM_ID,
			BRAND_ID,
			CORP_ID,
			TMPLT_NAME,
			AGENCY_ID,
			PRODUCT_CODE,
			MESSAGEBASE_INFO,
			APPROVAL_STATUS,
			REG_ID,
			UPD_ID,
			USE_YN,
			REG_DT,
			UPD_DT,
			APPROVAL_DT
		FROM
			CM_RCS_MSGBASE
	</select>

	<select id="selectKakaoTalkTemplate" parameterType="string" resultType="hashmap">
		/* template.selectKakaoTalkTemplate 알림톡 템플릿 리스트 조회 */
		SELECT
			KKO_CH_ID,
			PROJECT_ID,
			TMPLT_CODE,
			TMPLT_NAME,
			TMPLT_CONTENT,
			TMPLT_EMPHASIZE_TITLE,
			TMPLT_EMPHASIZE_DESC,
			TMPLT_BUTTONS,
			REG_DT,
			APPROVAL_DT,
			FINAL_TEST_SENDER_DT,
			TMPLT_RELEASE_REQ_DT
		FROM
			CM_KKO_TMPLT
	</select>

	<select id="selectFriendTalkTemplate" parameterType="string" resultType="hashmap">
		/* template.selectFriendTalkTemplate 친구톡 템플릿 리스트 조회 */
		SELECT
			TMPLT_ID,
			TMPLT_NAME,
			MSG_KIND,
			PROJECT_ID,
			TMPLT_CONTENT,
			IMG_URL,
			TMPLT_BUTTONS,
			REG_DT,
			REG_ID,
			UPD_DT,
			UPD_ID
		FROM
			CM_FRIENDTALK_TMPLT
	</select>

	<insert id="insertFriendTalkTemplate" parameterType="hashmap">
		/* template.insertFriendTalkTemplate 친구톡 템플릿 등록 */
		INSERT INTO CM_FRIENDTALK_TMPLT
		(
			TMPLT_ID, TMPLT_NAME, MSG_KIND, PROJECT_ID
		)
		VALUES
		(
    		#{tmpltId}, #{tmpltName}, #{msgKind}, #{projectId}
   		)
	</insert>

	<update id="updateFriendTalkTemplate" parameterType="hashmap">
		/* template.updateFriendTalkTemplate 친구톡 템플릿 수정 */
		UPDATE CM_FRIENDTALK_TMPLT
		SET
			TMPLT_NAME = #{tmpltName},
			MSG_KIND = #{msgKind},
			TMPLT_CONTENT = #{tmpltContent}
		WHERE TMPLT_ID = #{tmpltId}
	</update>

	<select id="selectSmsTemplate" parameterType="string" resultType="hashmap">
		/* template.selectSmsTemplate SMS/MMS 템플릿 리스트 조회 */
		SELECT
			TMPLT_ID,
			TMPLT_NAME,
			TMPLT_DESC,
			SENDER_TYPE,
			PROJECT_ID,
			MSG_KIND,
			TMPLT_TITLE,
			TMPLT_CONTENT,
			RCVBLC_NUMBER,
			IMG_URL,
			REG_DT,
			REG_ID,
			UPD_DT,
			UPD_ID
		FROM
			CM_SMS_TMPLT
	</select>

	<insert id="insertSmsTemplate" parameterType="hashmap">
		/* template.insertSmsTemplate SMS/MMS 템플릿 등록 */
		INSERT INTO CM_SMS_TMPLT
		(
			TMPLT_ID, TMPLT_NAME, TMPLT_DESC, SENDER_TYPE
		)
		VALUES
		(
    		#{tmpltId}, #{tmpltName}, #{tmpltDesc}, #{senderType}
   		)
	</insert>

	<update id="updateSmsTemplate" parameterType="hashmap">
		/* template.updateSmsTemplate SMS/MMS 템플릿 수정 */
		UPDATE CM_SMS_TMPLT
		SET
			TMPLT_NAME = #{tmpltName},
			TMPLT_DESC = #{tmpltDesc},
			SENDER_TYPE = #{senderType}
		WHERE TMPLT_ID = #{tmpltId}
	</update>

	<select id="selectMultiSendTemplate" parameterType="string" resultType="hashmap">
		/* template.selectMultiSendTemplate 통합발송 템플릿 리스트 조회 */
		SELECT
			PROJECT_ID,
			TMPLT_CODE,
			TMPLT_INFO,
			TMPLT_TYPE,
			MSG_KIND,
			OTHER_PROJECT_USE_YN,
			REG_DT,
			UPD_DT
		FROM
			CM_SMART_TMPLT
		WHERE TMPLT_TYPE = 'M'
	</select>

	<insert id="insertMultiSendTemplate" parameterType="hashmap">
		/* template.insertMultiSendTemplate 통합발송 템플릿 등록 */
		INSERT INTO CM_SMART_TMPLT
		(
			PROJECT_ID, TMPLT_CODE, TMPLT_INFO, TMPLT_TYPE, MSG_KIND, OTHER_PROJECT_USE_YN, REG_DT, UPD_DT
		)
		VALUES
		(
    		#{projectId}, #{tmpltCode}, #{tmpltInfo}, 'M', #{msgKind}, #{otherProjectUseYn}, SYSDATE, SYSDATE
   		)
	</insert>

	<update id="updateMultiSendTemplate" parameterType="hashmap">
		/* template.updateMultiSendTemplate 통합발송 템플릿 수정 */
		UPDATE CM_SMART_TMPLT
		SET
			TMPLT_INFO = #{tmpltInfo},
			MSG_KIND = #{msgKind},
			OTHER_PROJECT_USE_YN = #{otherProjectUseYn},
			UPD_DT = SYSDATE
		WHERE PROJECT_ID = #{projectId}
		AND		TMPLT_CODE = #{tmpltCode}
		AND		TMPLT_TYPE = 'M'
	</update>

	<select id="selectSmartTemplate" parameterType="string" resultType="hashmap">
		/* template.selectSmartTemplate 스마트발송 템플릿 리스트 조회 */
		SELECT
			PROJECT_ID,
			TMPLT_CODE,
			TMPLT_INFO,
			TMPLT_TYPE,
			MSG_KIND,
			OTHER_PROJECT_USE_YN,
			REG_DT,
			UPD_DT
		FROM
			CM_SMART_TMPLT
		WHERE TMPLT_TYPE = 'S'
	</select>

	<insert id="insertSmartTemplate" parameterType="hashmap">
		/* template.insertSmartTemplate 스마트발송 템플릿 등록 */
		INSERT INTO CM_SMART_TMPLT
		(
			PROJECT_ID, TMPLT_CODE, TMPLT_INFO, TMPLT_TYPE, MSG_KIND, OTHER_PROJECT_USE_YN, REG_DT, UPD_DT
		)
		VALUES
		(
    		#{projectId}, #{tmpltCode}, #{tmpltInfo}, 'S', #{msgKind}, #{otherProjectUseYn}, SYSDATE, SYSDATE
   		)
	</insert>

	<update id="updateSmartTemplate" parameterType="hashmap">
		/* template.updateSmartTemplate 스마트발송 템플릿 수정 */
		UPDATE CM_SMART_TMPLT
		SET
			TMPLT_INFO = #{tmpltInfo},
			MSG_KIND = #{msgKind},
			OTHER_PROJECT_USE_YN = #{otherProjectUseYn},
			UPD_DT = SYSDATE
		WHERE PROJECT_ID = #{projectId}
		AND		TMPLT_CODE = #{tmpltCode}
		AND		TMPLT_TYPE = 'S'
	</update>

</mapper>